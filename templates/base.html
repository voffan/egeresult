<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='abi.js') }}"></script>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class=col>
				<a href="{{ url_for('subjects') }}">Предметы</a>
			</div>
			<div class=col>
				<a href="{{ url_for('add_student') }}">Добавить школьника</a>
			</div>
			<div class=col>
				<a href="{{ url_for('edit_student') }}">Редактировать школьника</a>
			</div>
			<div class=col>
				<a href="{{ url_for('add_result') }}">Результаты</a>
			</div>
		</div>
		<div class="row">
			<div class="col">
				{% block content %}{% endblock %}
			</div>
		</div>
	</div>
</body>
<script>
	let web3 = new Web3('http://localhost:7545')
	let contract_adr = '0x28759E89a7582313E3EeF7E51EDCae8D1b5b3beb';//contract address
	let contract = new web3.eth.Contract(abi, contract_adr);
	let wallet = '';
	let subjects=[];
	async function InitAccount()
	{
		try
		{
			let accounts = await ethereum.request({'method':'eth_accounts'});
			wallet = accounts[0];
			console.log("Now I am", wallet);
		}catch(error)
		{
			alert(error);
		};
	}
	if (ethereum != undefined)
	{
		{% block script %}{% endblock %}
		ethereum.on('accountsChanged', (accounts) => { wallet = accounts[0]; console.log(wallet);});
	} else alert("You have no metamask or haven't logged in!");
</script>
</html>